// Configures Revapi (https://revapi.org/getting-started.html) to check API compatibility between
// successive driver versions.
{
  "revapi": {
    "java": {
      "filter": {
        "packages": {
          "regex": true,
          "exclude": [
            "com\\.datastax\\.oss\\.protocol\\.internal(\\..+)?",
            "com\\.datastax\\.oss\\.driver\\.internal(\\..+)?",
            "com\\.datastax\\.oss\\.driver\\.shaded(\\..+)?",
            // Don't re-check sibling modules that this module depends on
            "com\\.datastax\\.oss\\.driver\\.api\\.core(\\..+)?"
          ]
        }
      }
    },
    "ignore": [
      {
        "regex": true,
        "code": "java\\.annotation\\.removed",
        "old": "parameter com\\.datastax\\.oss\\.driver\\.api\\.querybuilder\\.select\\.Selector com\\.datastax\\.oss\\.driver\\.api\\.querybuilder\\.select\\.Selector::range\\(.*, ===com\\.datastax\\.oss\\.driver\\.api\\.querybuilder\\.term\\.Term===, com\\.datastax\\.oss\\.driver\\.api\\.querybuilder\\.term\\.Term\\).*",
        "new": "parameter com\\.datastax\\.oss\\.driver\\.api\\.querybuilder\\.select\\.Selector com\\.datastax\\.oss\\.driver\\.api\\.querybuilder\\.select\\.Selector::range\\(.*, ===com\\.datastax\\.oss\\.driver\\.api\\.querybuilder\\.term\\.Term===, com\\.datastax\\.oss\\.driver\\.api\\.querybuilder\\.term\\.Term\\).*",
        "annotationType": "edu.umd.cs.findbugs.annotations.NonNull",
        "package": "com.datastax.oss.driver.api.querybuilder.*",
        "oldArchive": "com.datastax.oss:java-driver-query-builder:jar:4.0.0-beta2",
        "elementKind": "parameter",
        "justification": "Fix nullability annotations on query builder range selectors"
      },
      {
        "regex": true,
        "code": "java\\.annotation\\.added",
        "old": "parameter com\\.datastax\\.oss\\.driver\\.api\\.querybuilder\\.select\\.Selector com\\.datastax\\.oss\\.driver\\.api\\.querybuilder\\.select\\.Selector::range\\(.*, ===com\\.datastax\\.oss\\.driver\\.api\\.querybuilder\\.term\\.Term===, com\\.datastax\\.oss\\.driver\\.api\\.querybuilder\\.term\\.Term\\).*",
        "new": "parameter com\\.datastax\\.oss\\.driver\\.api\\.querybuilder\\.select\\.Selector com\\.datastax\\.oss\\.driver\\.api\\.querybuilder\\.select\\.Selector::range\\(.*, ===com\\.datastax\\.oss\\.driver\\.api\\.querybuilder\\.term\\.Term===, com\\.datastax\\.oss\\.driver\\.api\\.querybuilder\\.term\\.Term\\).*",
        "annotationType": "edu.umd.cs.findbugs.annotations.Nullable",
        "package": "com.datastax.oss.driver.api.querybuilder.*",
        "newArchive": "com.datastax.oss:java-driver-query-builder:jar:4.0.0-beta3",
        "elementKind": "parameter",
        "justification": "Fix nullability annotations on query builder range selectors"
      },
      {
        "regex": true,
        "code": "java\\.annotation\\.removed",
        "old": "parameter com\\.datastax\\.oss\\.driver\\.api\\.querybuilder\\.select\\.Selector com\\.datastax\\.oss\\.driver\\.api\\.querybuilder\\.select\\.Selector::range\\(.*, com\\.datastax\\.oss\\.driver\\.api\\.querybuilder\\.term\\.Term, ===com\\.datastax\\.oss\\.driver\\.api\\.querybuilder\\.term\\.Term===\\).*",
        "new": "parameter com\\.datastax\\.oss\\.driver\\.api\\.querybuilder\\.select\\.Selector com\\.datastax\\.oss\\.driver\\.api\\.querybuilder\\.select\\.Selector::range\\(.*, com\\.datastax\\.oss\\.driver\\.api\\.querybuilder\\.term\\.Term, ===com\\.datastax\\.oss\\.driver\\.api\\.querybuilder\\.term\\.Term===\\).*",
        "annotationType": "edu.umd.cs.findbugs.annotations.NonNull",
        "package": "com.datastax.oss.driver.api.querybuilder.*",
        "oldArchive": "com.datastax.oss:java-driver-query-builder:jar:4.0.0-beta2",
        "elementKind": "parameter",
        "justification": "Fix nullability annotations on query builder range selectors"
      },
      {
        "regex": true,
        "code": "java\\.annotation\\.added",
        "old": "parameter com\\.datastax\\.oss\\.driver\\.api\\.querybuilder\\.select\\.Selector com\\.datastax\\.oss\\.driver\\.api\\.querybuilder\\.select\\.Selector::range\\(.*, com\\.datastax\\.oss\\.driver\\.api\\.querybuilder\\.term\\.Term, ===com\\.datastax\\.oss\\.driver\\.api\\.querybuilder\\.term\\.Term===\\).*",
        "new": "parameter com\\.datastax\\.oss\\.driver\\.api\\.querybuilder\\.select\\.Selector com\\.datastax\\.oss\\.driver\\.api\\.querybuilder\\.select\\.Selector::range\\(.*, com\\.datastax\\.oss\\.driver\\.api\\.querybuilder\\.term\\.Term, ===com\\.datastax\\.oss\\.driver\\.api\\.querybuilder\\.term\\.Term===\\).*",
        "annotationType": "edu.umd.cs.findbugs.annotations.Nullable",
        "package": "com.datastax.oss.driver.api.querybuilder.*",
        "newArchive": "com.datastax.oss:java-driver-query-builder:jar:4.0.0-beta3",
        "elementKind": "parameter",
        "justification": "Fix nullability annotations on query builder range selectors"
      },
      {
        "regex": true,
        "code": "java\\.annotation\\.removed",
        "old": "parameter com\\.datastax\\.oss\\.driver\\.api\\.querybuilder\\.select\\.Select com\\.datastax\\.oss\\.driver\\.api\\.querybuilder\\.select\\.OngoingSelection::range\\(.*, ===com\\.datastax\\.oss\\.driver\\.api\\.querybuilder\\.term\\.Term===, com\\.datastax\\.oss\\.driver\\.api\\.querybuilder\\.term\\.Term\\).*",
        "new": "parameter com\\.datastax\\.oss\\.driver\\.api\\.querybuilder\\.select\\.Select com\\.datastax\\.oss\\.driver\\.api\\.querybuilder\\.select\\.OngoingSelection::range\\(.*, ===com\\.datastax\\.oss\\.driver\\.api\\.querybuilder\\.term\\.Term===, com\\.datastax\\.oss\\.driver\\.api\\.querybuilder\\.term\\.Term\\).*",
        "annotationType": "edu.umd.cs.findbugs.annotations.NonNull",
        "package": "com.datastax.oss.driver.api.querybuilder.select",
        "oldArchive": "com.datastax.oss:java-driver-query-builder:jar:4.0.0-beta2",
        "elementKind": "parameter",
        "justification": "Fix nullability annotations on query builder range selectors"
      },
      {
        "regex": true,
        "code": "java\\.annotation\\.added",
        "old": "parameter com\\.datastax\\.oss\\.driver\\.api\\.querybuilder\\.select\\.Select com\\.datastax\\.oss\\.driver\\.api\\.querybuilder\\.select\\.OngoingSelection::range\\(.*, ===com\\.datastax\\.oss\\.driver\\.api\\.querybuilder\\.term\\.Term===, com\\.datastax\\.oss\\.driver\\.api\\.querybuilder\\.term\\.Term\\).*",
        "new": "parameter com\\.datastax\\.oss\\.driver\\.api\\.querybuilder\\.select\\.Select com\\.datastax\\.oss\\.driver\\.api\\.querybuilder\\.select\\.OngoingSelection::range\\(.*, ===com\\.datastax\\.oss\\.driver\\.api\\.querybuilder\\.term\\.Term===, com\\.datastax\\.oss\\.driver\\.api\\.querybuilder\\.term\\.Term\\).*",
        "annotationType": "edu.umd.cs.findbugs.annotations.Nullable",
        "package": "com.datastax.oss.driver.api.querybuilder.select",
        "newArchive": "com.datastax.oss:java-driver-query-builder:jar:4.0.0-beta3",
        "elementKind": "parameter",
        "justification": "Fix nullability annotations on query builder range selectors"
      },
      {
        "regex": true,
        "code": "java\\.annotation\\.removed",
        "old": "parameter com\\.datastax\\.oss\\.driver\\.api\\.querybuilder\\.select\\.Select com\\.datastax\\.oss\\.driver\\.api\\.querybuilder\\.select\\.OngoingSelection::range\\(.*, com\\.datastax\\.oss\\.driver\\.api\\.querybuilder\\.term\\.Term, ===com\\.datastax\\.oss\\.driver\\.api\\.querybuilder\\.term\\.Term===\\).*",
        "new": "parameter com\\.datastax\\.oss\\.driver\\.api\\.querybuilder\\.select\\.Select com\\.datastax\\.oss\\.driver\\.api\\.querybuilder\\.select\\.OngoingSelection::range\\(.*, com\\.datastax\\.oss\\.driver\\.api\\.querybuilder\\.term\\.Term, ===com\\.datastax\\.oss\\.driver\\.api\\.querybuilder\\.term\\.Term===\\).*",
        "annotationType": "edu.umd.cs.findbugs.annotations.NonNull",
        "package": "com.datastax.oss.driver.api.querybuilder.select",
        "oldArchive": "com.datastax.oss:java-driver-query-builder:jar:4.0.0-beta2",
        "elementKind": "parameter",
        "justification": "Fix nullability annotations on query builder range selectors"
      },
      {
        "regex": true,
        "code": "java\\.annotation\\.added",
        "old": "parameter com\\.datastax\\.oss\\.driver\\.api\\.querybuilder\\.select\\.Select com\\.datastax\\.oss\\.driver\\.api\\.querybuilder\\.select\\.OngoingSelection::range\\(.*, com\\.datastax\\.oss\\.driver\\.api\\.querybuilder\\.term\\.Term, ===com\\.datastax\\.oss\\.driver\\.api\\.querybuilder\\.term\\.Term===\\).*",
        "new": "parameter com\\.datastax\\.oss\\.driver\\.api\\.querybuilder\\.select\\.Select com\\.datastax\\.oss\\.driver\\.api\\.querybuilder\\.select\\.OngoingSelection::range\\(.*, com\\.datastax\\.oss\\.driver\\.api\\.querybuilder\\.term\\.Term, ===com\\.datastax\\.oss\\.driver\\.api\\.querybuilder\\.term\\.Term===\\).*",
        "annotationType": "edu.umd.cs.findbugs.annotations.Nullable",
        "package": "com.datastax.oss.driver.api.querybuilder.select",
        "newArchive": "com.datastax.oss:java-driver-query-builder:jar:4.0.0-beta3",
        "elementKind": "parameter",
        "justification": "Fix nullability annotations on query builder range selectors"
      },
      {
        "code": "java.class.removed",
        "old": "class com.datastax.oss.driver.api.querybuilder.QueryBuilderDsl",
        "oldArchive": "com.datastax.oss:java-driver-query-builder:jar:4.0.0-beta3",
        "justification": "JAVA-2151: Drop \"Dsl\" suffix from query builder main classes"
      },
      {
        "code": "java.class.removed",
        "old": "class com.datastax.oss.driver.api.querybuilder.SchemaBuilderDsl",
        "oldArchive": "com.datastax.oss:java-driver-query-builder:jar:4.0.0-beta3",
        "justification": "JAVA-2151: Drop \"Dsl\" suffix from query builder main classes"
      },
      {
        "code": "java.method.parameterTypeChanged",
        "old": "parameter SelfT com.datastax.oss.driver.api.querybuilder.schema.RelationOptions<SelfT extends com.datastax.oss.driver.api.querybuilder.schema.RelationOptions<SelfT extends com.datastax.oss.driver.api.querybuilder.schema.RelationOptions<SelfT>>>::withCaching(boolean, ===com.datastax.oss.driver.api.querybuilder.SchemaBuilderDsl.RowsPerPartition===)",
        "new": "parameter SelfT com.datastax.oss.driver.api.querybuilder.schema.RelationOptions<SelfT extends com.datastax.oss.driver.api.querybuilder.schema.RelationOptions<SelfT extends com.datastax.oss.driver.api.querybuilder.schema.RelationOptions<SelfT>>>::withCaching(boolean, ===com.datastax.oss.driver.api.querybuilder.SchemaBuilder.RowsPerPartition===)",
        "oldArchive": "com.datastax.oss:java-driver-query-builder:jar:4.0.0-beta3",
        "newArchive": "com.datastax.oss:java-driver-query-builder:jar:4.0.0-rc1-SNAPSHOT",
        "justification": "JAVA-2151: Drop \"Dsl\" suffix from query builder main classes"
      }
    ]
  }
}

